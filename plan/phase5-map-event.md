# フェーズ5: マップ・イベント進行

## 目的
マップ移動とイベント発生の仕組みを実装する。

## 依存
- フェーズ1（型定義・エリアデータ）

## 実装ファイル
- `src/lib/map.ts` — マップ進行
- `src/lib/event.ts` — イベント生成

## 関数

### rollEvent
エリアの確率テーブルに従ってイベントを決定する。
- 6マス目は必ず `"boss"`
- 1〜5マス目は確率テーブルで `battle / rest / treasure / trap`

### generateUpcomingEvents
次の3マス分のイベントを先読み生成する。

### advanceStep
1マス進む。
- currentStep を +1
- 次のイベントを確定

### advanceArea
ボス撃破後、次のエリアへ移動する。
- currentArea を +1
- currentStep を 1 にリセット
- エリア8クリア時の処理

## テスト
- 6マス目が必ずbossイベントであること
- 1〜5マス目のイベントが確率テーブルに従うこと（統計的テスト）
- 先読みイベントが3つ生成されること
- エリア遷移が正しいこと
- エリア8クリア後に最初に戻ること

## 完了条件
- 全テストが通る
