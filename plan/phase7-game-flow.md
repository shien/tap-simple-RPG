# フェーズ7: ゲーム全体フロー

## 目的
死亡リスタート・エリア遷移・クリア判定など、ゲーム全体の進行を管理する。

## 依存
- フェーズ2（プレイヤー）
- フェーズ5（マップ・イベント）
- フェーズ6（戦闘）

## 実装ファイル
- `src/lib/game.ts`

## 関数

### createNewGame
新しいゲームを初期化する。
- 初期プレイヤー生成
- 草原エリア1、マス1からスタート
- 先読みイベント3つ生成

### processEvent
現在マスのイベントを処理する。
- Battle → 戦闘開始
- Rest → HP回復
- Treasure → EXP/Gold獲得
- Trap → ダメージ

### handleDeath
死亡時のリスタート処理。
- 全進行リセット
- createNewGame と同等の初期化

### handleBossClear
ボス撃破後の処理。
- 次エリアへ遷移
- エリア8ボス撃破時 → クリア → 最初から

### isGameClear
魔王城ボス撃破でクリア判定。

## テスト
- 新規ゲームが正しい初期状態であること
- 各イベントが正しく処理されること
- 死亡で全リセットされること
- ボス撃破で次エリアに進むこと
- エリア8クリアで最初に戻ること

## 完了条件
- 全テストが通る
- ゲーム全体のフローが一通り動作すること
